---
title: 类型信息
date: 2020-07-15 09:19
categories:
  - JavaSE
tags:
  - JavaSE
toc: true
---
## 类型信息

运行时类型信息，能够在程序运行时发现和使用类型信息。

----------

### Class对象

Class对象用来表示运行时的类型信息。

类是程序的一部分， 每个类都有一个Class对象。 被保存在一个同名的.class文件中。 为了生产这个类的对象， JVM会先调用“类加载器”子系统来把这个类加载到内存中。

类加载器子系统可能包含一条类加载器链， 但是有且只有一个原生类加载器。
它是JVM实现的一部分，通常在这条链中，不需要添加额外的类加载器，但是如果有特殊需要， （比如以某种特殊的方式加载类，以支持web服务器应用，或者网络下载类。可以以挂载其他额外的类加载器。）

当程序创建一个类的静态成员时， 就会加载这个类。 （构造函数就是静态的，只是省略了static）

类加载器首先会检查这个类的Class对象有没有加载，如果没有， 就会根据类名加载.class文件。 JVM会对加载后的字节码进行验证，确保没有损坏

### 反射

Java不允许在运行时改变程序结构或类型变量的结构， 但是它允许在运行时探知、加载、调用在编译期完全未知的class， 可以在运行时加载class， 生成实例对象， 嗲用method ， 或者field赋值。

这种类似于看透了class的特性称为反射。在java.lang.reflect库中包含类Field、Method和Constructor。对应了成员变量， 方法， 和构造方法

### 动态代理

代理是基本的设计模式之一。 一个对象封装真实的对象， 代替其提供其他或者不同的操作， 这些操作通常涉及与真实对象的通信， 代理对象通常作为中间对象。

Java的动态代理， 不仅动态创建代理对象， 而且动态处理对代理方法的调用。 在动态代理上进行的所有调用都被重定向到单个调用处理程序， 该处理程序负责发现调用内容并决定如何处理。

### Optional类

当操作的对象是null时， 会产生NullPointException异常。
Optional对象可以防止代码抛出空指针的异常
